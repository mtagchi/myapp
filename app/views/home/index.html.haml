- if user_signed_in?
  .contents
    .contents-title
      %h2 参加イベント
      - if @participations.length != 0
        .right= link_to 'イベント一覧へ', events_path
    .contents-main
      %ul
        - if @participations.length == 0
          参加イベントはありません。
          %br
          イベントに参加してみましょう！
          = link_to 'イベント一覧へ', events_path
        - @participations.each do |participate|
          %li.main-group.list
            = link_to '', "events/#{participate.event.id}", class: 'card-link'
            .left
              %span= participate.event.date.strftime("%Y")
              %h3= participate.event.date.strftime("%m/%d")
              %h5= participate.event.date.strftime("(#{%w(日 月 火 水 木 金 土)[participate.event.date.wday]})")
            .center
              %h5= link_to participate.event.title.truncate(30), participate.event
              %span
                = icon 'fas', 'user-friends', class: 'fa-fw'
                - if participate.event.no_of_participants.present?
                  #{participate.event.participants.length}/#{participate.event.no_of_participants}人
                - else
                  #{participate.event.participants.length}人
              %br
              %span
                = icon 'fas', 'clock', class: 'fa-fw'
                - if participate.event.start_time == nil && participate.event.end_time == nil
                  未定
                - elsif participate.event.start_time != nil
                  = participate.event.start_time.strftime("%H:%M")
                  〜
                  = participate.event.end_time.strftime("%H:%M") unless participate.event.end_time == nil
                - else
                  未定〜
                  = participate.event.end_time.strftime("%H:%M")
              %br
              %span
                = icon 'fas', 'map-marker-alt', class: 'fa-fw'
                - if participate.event.address.present?
                  = participate.event.address.truncate(15)
                - else
                  未定
            .right
              = link_to image_tag(participate.event.user.image.url, class: 'twitter-icon'), participate.event.user, class: 'btn btn-icon'
      = will_paginate @participations, class: "pagination justify-content-center", previous_label: ' &lt 前へ', next_label: '次へ &gt', inner_window: 1, outer_window: 0, renderer: WillPaginate::ActionView::Bootstrap4LinkRenderer

    .contents-title
      %h2 主催イベント
    .contents-main
      %ul
        - if @host_events.length == 0
          主催イベントはありません。
          %br
          epuloでイベントを開催してみませんか？
          .button-group= link_to 'イベントを開催する', new_event_path, class: 'btn btn-twitter rounded-pill'
        - @host_events.each do |event|
          %li.main-group.list
            = link_to '', "events/#{event.id}", class: 'card-link'
            .left
              %span= event.date.strftime("%Y")
              %h3= event.date.strftime("%m/%d")
              %h5= event.date.strftime("(#{%w(日 月 火 水 木 金 土)[event.date.wday]})")
            .center
              %h5= link_to event.title.truncate(30), event
              %span
                = icon 'fas', 'user-friends', class: 'fa-fw'
                - if event.no_of_participants.present?
                  #{event.participants.length}/#{event.no_of_participants}人
                - else
                  #{event.participants.length}人
              %br
              %span
                = icon 'fas', 'clock', class: 'fa-fw'
                - if event.start_time == nil && event.end_time == nil
                  未定
                - elsif event.start_time != nil
                  = event.start_time.strftime("%H:%M")
                  〜
                  = event.end_time.strftime("%H:%M") unless event.end_time == nil
                - else
                  未定〜
                  = event.end_time.strftime("%H:%M")
              %br
              %span
                = icon 'fas', 'map-marker-alt', class: 'fa-fw'
                - if event.address.present?
                  = event.address.truncate(15)
                - else
                  未定
      = will_paginate @host_events, param_name: 'host_page', class: "pagination justify-content-center", previous_label: ' &lt 前へ', next_label: '次へ &gt', inner_window: 1, outer_window: 0, renderer: WillPaginate::ActionView::Bootstrap4LinkRenderer

- else
  .container-fluid
    .main-explanation
      %h1 epulo 
      %h5 Twitterフォロワーと
      %h5 飲み会を開けるサービス
      = link_to 'Twitterで登録/ログイン', user_twitter_omniauth_authorize_path, class: 'btn btn-twitter rounded-pill', role: "button"
  - if @events.length != 0
    .contents-home
      .row
        .index-title
          %h2 新着イベント
          = link_to 'すべて表示', events_path
        - @events.each do |event|
          .col-sm-6.col-md-3
            .card
              = link_to '', "/events/#{event.id}" 
              .card-body.px-2.py-3
                %h5.card-title.unbroken= event.title.truncate(15)
                %p.card-text.unbroken
                  = icon 'fas', 'calendar-alt', class: 'fa-fw'
                  = event.date
                  %br
                  = icon 'fas', 'clock', class: 'fa-fw'
                  - if event.start_time == nil && event.end_time == nil
                    未定
                  - elsif event.start_time != nil
                    = event.start_time.strftime("%H:%M")
                    〜
                    = event.end_time.strftime("%H:%M") unless event.end_time == nil
                  - else
                    未定〜
                    = event.end_time.strftime("%H:%M")
                  %br
                  = icon 'fas', 'map-marker-alt', class: 'fa-fw'
                  - if event.address.present?
                    = event.address.truncate(15)
                  - else
                    未定
                %h6.card-title
                  = image_tag(event.user.image.url, class: 'twitter-icon')
                  = event.user.name
